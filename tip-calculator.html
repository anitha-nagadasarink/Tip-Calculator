<!-- Om Ganapathi Siddhi Buddhi
Omshakthi amma Shivappa
Vishnu Lakshmi
Brahma Saraswathi 
Dakshinamurthy Hayagriva
Sri Venkateshwara Sri Aurogya Vidya Vijaya Gnana Dhyrya Aurogya Lakshmi devi -->

<!-- Om Ganapathi Siddhi Buddhi
Omshakthi amma Shivappa
Vishnu Lakshmi
Brahama Sarawathi 
Dakshinamurthy Hayagriva
Sri Venkateshwara Sri Auogya Vidya Vijaya Gnana Dhyrya Auorgya Lakshmi devi -->


<!DOCTYPE html>
<html lang="en">
<head>
  <title> Tip Calculator </title>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<link href="css/tip-calculator.css" rel="stylesheet"/>
</head>
<body>

<header>
  <h1> Amma Tip Calculator</h1>
</header>

<section class="tip-calculator">
  <div class="tip-container">
    <div class="tip-grid tip-grid-left">
      <div class="tip-form-container">
        <form class="tip-form">
          <label>Bill</label>
          <input type="number" id="total-bill" placeholder="Enter Total Bill" minlength="6" maxlength="25" required/>
          <label class="error-text">Input field should not be Zero</label>
        </form>
      </div>

      <div class="tip-values-container">
        <p>Select Tip</p>
      <div class="tip-values">
        <div class="tip-value" data-tip="5">5%</div>
        <div class="tip-value" data-tip="10">10%</div>
        <div class="tip-value" data-tip="15">15%</div>
        <div class="tip-value" data-tip="25">25%</div>
        <div class="tip-value" data-tip="50">50%</div>
       <div class="tip-custom">
          <input type="number" class="custom-input" placeholder="Custom Value"/>
        </div>
      </div>
      </div>

      <div class="tip-form-container">
        <form class="tip-person-form">
          <label>Number of People</label>          
          <input type="number" class="number-person" placeholder="Enter Number of person" />
          <label class="error-text">Input field should not be Zero</label>
        </form>
      </div>
    </div>
    <div class="tip-grid tip-grid-right">
      <div class="row">
        <h5>Tip Amount</h5>
        <h3>$<span class="tip-amount">0.0</span></h3>
      </div>
      <div class="row">
        <h5>Total Bill</h5>
        <h3>$<span class="tip-total-amount">0.0</span></h3>
      </div>
      <button class="reset-btn">Reset</button>
    </div>
  </div>
</section>
<script>

// Variable Declaration
var billAmountValue;
var finalBillValue;
var totalTipValue; 
var numberPeopleValue;
var tipForm = document.querySelector('.tip-form');
var personForm = document.querySelector('.tip-person-form');

var btns = document.querySelectorAll('.tip-value');
 btns.forEach(function(btn, i){
  btn.addEventListener('click', function(e){

     // Variable Initailization
     variableInit();

    //Getting value from Data Tip attribute
    var tipValue = e.target.getAttribute('data-tip');

     if((billAmountValue <= 0 && numberPeopleValue <= 0)){
      tipForm.classList.add('error-message');
      personForm.classList.add('error-message');   
     }  else if(billAmountValue <= 0){
       tipForm.classList.add('error-message');
     } else if(numberPeopleValue <= 0){
       personForm.classList.add('error-message');
     } else {
        tipForm.classList.remove('error-message');
        personForm.classList.remove('error-message');

        // Tip Calculation function call
        tipCalculation(e);
     
     }  
  });   
 });

//  Reset Button Values
var resetBtn = document.querySelector('.reset-btn');
resetBtn.addEventListener('click', function(){
  document.getElementById('total-bill').value = '';
  document.querySelector('.number-person').value = '';
  document.querySelector('.custom-input').value ='';
  totalTipValue.innerHTML = '0.0';
  finalBillValue.innerHTML = '0.0';

  tipForm.classList.remove('error-message');
  personForm.classList.remove('error-message');
});

// Custom value
var customInput = document.querySelector('.custom-input');

customInput.addEventListener('change', function(e){

  // Variable initailization
  variableInit();

 // Tip Calculation function call
  tipCalculation(e)
});

function variableInit(){
  billAmountValue = document.getElementById('total-bill').value;
  numberPeopleValue = document.querySelector('.number-person').value;
  finalBillValue = document.querySelector('.tip-total-amount');
  totalTipValue = document.querySelector('.tip-amount'); 
}

function tipCalculation(e){

 //Getting value from Data Tip attribute
    var tipValue =e.target.getAttribute('data-tip') > 0? e.target.getAttribute('data-tip'): e.target.value;

    var tipCalc = (billAmountValue * tipValue) / 100;  
    var tipForEach = tipCalc / numberPeopleValue;
    var billAmount = billAmountValue / numberPeopleValue;
    var totalBill = billAmount + tipForEach;

    // Display Data in DOM Elements
     totalTipValue.innerHTML = tipForEach.toFixed(2);
     finalBillValue.innerHTML = totalBill.toFixed(2);
}

</script>

</body>  
</html>  